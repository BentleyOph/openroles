<div style="max-width: 800px; margin: 2rem auto; font-family: sans-serif;">
  <h1>Job Search</h1>
  <p>Find your next role. Try "software engineer at uber" or "remote python".</p>

  <%# The Search Form %>
  <%= form_with(url: root_path, method: :get, style: "display: flex; gap: 0.5rem;") do %>
    <%= text_field_tag :query, params[:query], placeholder: "Search for jobs...", style: "flex-grow: 1; padding: 0.75rem; font-size: 1rem;" %>
    <%= submit_tag "Search", style: "padding: 0.75rem 1.5rem; font-size: 1rem; cursor: pointer;" %>
  <% end %>
  <% if params[:query].present? %>
    <div style="background-color: #f8f9fa; padding: 1rem; margin-top: 2rem; border-radius: 5px;">
      <h3>Create an Alert</h3>
      <p>Get an email when new jobs are posted for: <strong>"<%= params[:query] %>"</strong></p>

      <%= form_with(model: Alert.new, style: "display: flex; gap: 0.5rem;") do |form| %>
        <%# Hidden field to pass along the current search query %>
        <%= form.hidden_field :query, value: params[:query] %>

        <%= form.email_field :email, placeholder: "Enter your email...", required: true, style: "flex-grow: 1; padding: 0.75rem;" %>
        <%= form.submit "Notify Me" %>
      <% end %>
    </div>
  <% end %>

  <hr style="margin: 2rem 0;">
  

  <%# The Results Section %>
  <div id="results">
    <% if @jobs.any? %>
      <h2>Search Results</h2>
      <% @jobs.each do |job| %>
        <div style="border: 1px solid #ccc; padding: 1rem; margin-bottom: 1rem; border-radius: 5px;">
          <h3><%= job.title %></h3>
          <p><strong><%= job.company.name %></strong></p>
          <p><%= job.description %></p>
          <% if job.remote? %>
            <span style="background-color: #e0f2fe; color: #0c5464; padding: 0.25rem 0.5rem; border-radius: 10px; font-size: 0.8rem;">Remote</span>
          <% end %>
        </div>
      <% end %>
    <% elsif params[:query].present? %>
      <%# This message shows only if a search was performed but found nothing %>
      <p>No jobs found matching your query.</p>
    <% end %>
  </div>
</div>